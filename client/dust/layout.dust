<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>
		{?title}
			{title} - {siteTitle}
		{:else}
			{siteTitle}
		{/title}
	</title>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">

	<link rel="shortcut icon" href="/image/favicon1.ico" type="image/x-icon"/>

	<link href="/lib/bootstrap/css/bootstrap.css" rel="stylesheet">
	<!-- custom body padding 은 bootstrap.css 와 responsive.css 사이에 들어가야 한다 -->
	<link href="/css/l.css" rel="stylesheet">
	<link href="/lib/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

	<script src="/lib/es5-shim.min.js"></script>
	<script src="/lib/json2.js"></script>
	<script src="/lib/underscore-min.js"></script>
	<script src="/lib/jquery-1.9.1.min.js"></script>
	<script src="/lib/jquery.simpleplaceholder.js"></script>
	<script src="/lib/bootstrap/js/bootstrap.min.js"></script>
	<script src="/lib/superagent.js"></script>
	<script src="/lib/spin.min.js"></script>
	<!--<script src="/lib/URI.js"></script>-->
	<script src="/js/l-b.js"></script>
	<script src="/js/msg-b.js"></script>
	<script src="/js/session-b.js"></script>
	<script src="/js/post-b.js"></script>
	<!--<script src="js/search.js"></script>-->

</head>

<body>

<!-- navbar -->

<div class="navbar navbar-fixed-top">
	<div class="navbar-inner">
		<div class="container-fluid">
			{?role}
				<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</a>
				<ul class="nav">
					<li><a href="/thread">{siteTitle}</a></li>
					<li class="divider-vertical"></li>
					<li><a href="/logout">logout</a></li>
					{!-- all 카테고리 때문에 New 버튼 표시를 분기하는 것은 쉽지 않다 --!}
					<li class="divider-vertical"></li>
					<li><button class="btn btn-primary" onclick="location='/thread/new?c={category.id}'; return false;">New</button></li>
				</ul>
				<div class="nav-collapse">
					<form class="navbar-search pull-right">
						<input type="text" class="input-large search-query" placeholder="Search">
					</form>
				</div>
			{:else}
				<ul class="nav">
					<li><a href="/thread">{siteTitle}</a></li>
				</ul>
			{/role}
		</div>
	</div>

</div>

<!-- category -->

<div class="container-fluid">
	<div class="row-fluid">
		<div class="span2">
			{?category}
				<div id="category" class="well well-small hidden-phone" style="margin-top:100px;">
					<ul class="nav nav-list">
						{#role.readableCategory curCategoryId=category.id}
							{@if cond="{id} === {curCategoryId}"}
								<li class="active">
							{:else}
								<li>
							{/if}
							{@if cond="{id} === 0"}
								<a href="/thread">{name}</a>
							{:else}
								<a href="/thread?c={id}">{name}</a>
							{/if}
							</li>
							{?sep}
								{@sep}
									<li class="divider"></li>
								{/sep}
							{/sep}
						{/role.readableCategory}
					</ul>
				</div>
				<div id="category-phone" class="visible-phone">
					<div class="btn-group">
						<a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
							{category.name}{~s}
							<span class="caret"></span>
						</a>
						<ul class="dropdown-menu">
							{#role.readableCategory}
								<li>
									{@if cond="{id} === 0"}
										<a href="/thread">{name}</a>
									{:else}
										<a href="/thread?c={id}">{name}</a>
									{/if}
								</li>
								{?sep}
									{@sep}
										<li class="divider"></li>
									{/sep}
								{/sep}
							{/role.readableCategory}
						</ul>
					</div>
				</div>
			{/category}
		</div>

		<div class="span10">
			<h1 class="page-header" style="border:0;">{title}</h1>
			{+content/}
		</div>

	</div>
</div>

<div id="error-modal" class="modal hide">
	<div class="modal-header">
		<h3></h3>
	</div>
	<div class="modal-body">
		<p></p>
	</div>
	<div class="modal-footer">
		<a href="#" class="btn btn-primary" data-dismiss="modal">Close</a>
	</div>
</div>

</body>
</html>
