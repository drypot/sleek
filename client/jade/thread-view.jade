extends layout

block title
	title #{thread.title} - #{siteTitle}

block content

	script
		init.add(function () {
			post.initThreadAndPosts();
			post.initReplyForm();
		});

	.container
		.col-lg-12

			.page-header
				h2 #{thread.title}

			#posts
				for post in posts
					.post(id=post._id)
						h5 #{post.writer}
							small.d !{post.cdateStr}
						if post.files
							.files
								for file in post.files
									.file
										a(href=file.url, target='_blank') #{file.name}
						.text
							pre #{post.text}
						if post.editable
							.cmd
								a.btn.btn-small.btn-default(href='/threads/' + thread._id + '/' + post._id + '/edit') Edit

			.page-header
				h2 Reply

			form#reply-form(action='/api/threads/' + thread._id, method="post", enctype="multipart/form-data")
				.form-row
					label.control-label 필명
					input.input-with-feedback.col-lg-4(type='text', name='writer', value='', maxlength='32')
				.form-row
					label.control-label 내용
					textarea.input-with-feedback(name='text', rows=10)
				.form-row.file-group.clearfix
					.files.col.col-lg-7
					.actions.col.col-lg-1
						button.btn.glyphicon.glyphicon-plus
				.form-action
					button.btn.btn-primary(name='send') Send
					button.btn.btn-default.disabled.hide(name='sending') Sending
